<!--
  Generated template for the TrackingHistoryPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <ion-navbar color="navbar" text-center>
    <ion-title>
      {{adminUserName}}
    </ion-title>
  </ion-navbar>

  <!-- <script src="http://maps.googleapis.com/maps/api/js?key=AIzaSyBshSrAhk_5uO903g1yp6wlgVAaF67ET5s&libraries=places"></script> -->

</ion-header>

<ion-content no-padding>

  <div style="top:0rem;z-index: 999; margin:0;width: 100%;height:8%">
    <ion-row>
      <ion-col col-12>
        <ion-datetime text-center [(ngModel)]="trackDate" [max]="currentDate" displayFormat="DD-MM-YYYY" (ionChange)="getTrackingData()"></ion-datetime>
      </ion-col>
    </ion-row>
  </div>

  <div *ngIf="latLongList.length > 0" style="position: fixed; bottom: 0rem; z-index: 99999; margin:10% 0;width: 100%;height:20%">
    <ion-card no-padding>
      <ion-card-content>

        <ion-row>
          <ion-col col-5 class="fm-sub-title">
            {{trackDate | date : 'dd MMM yyyy' }}
          </ion-col>
          <ion-col col-7 style="font-size: 1.4rem !important" color="semidark">
            {{time }}
          </ion-col>
        </ion-row>

        <ion-row>
          <ion-item no-padding>
            <ion-range [min]="min" [max]="max" step="1" snaps="true" [(ngModel)]="rangeVal" color="secondary"
              (ionChange)="updatePath()">
              <ion-label range-left style="font-size: 1rem !important" color="light">{{minTime}}</ion-label>
              <ion-label range-right style="font-size: 1rem !important" color="light">{{maxTime}}</ion-label>
            </ion-range>
          </ion-item>
        </ion-row>

        <ion-row>
          <ion-col col-5 class="fm-sub-title">
            Distance
          </ion-col>
          <ion-col col-6 style="font-size: 1.4rem !important" color="semidark">
            {{distanceTravelled}} Kms
          </ion-col>
          <ion-col col-1></ion-col>
        </ion-row>
      </ion-card-content>
    </ion-card>
  </div>
  
  <div *ngIf="latLongList.length == 0" class="pj-empty-page" style="margin-top: 40%;">
    <ion-icon name="ios-pin-outline"></ion-icon>
    <h4>No Tracking History For <strong>{{trackDate | date: 'dd MMM yyyy'}}</strong>.</h4>
    <h4>Please Select Other Date from Above To View Tracking Data.</h4>
  </div>

  <div style="height: 70%;" [class.mapDisplay]="latLongList.length == 0" >
    <div #map id="map"></div>
  </div>


</ion-content>