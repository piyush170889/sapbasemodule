<!--
  Generated template for the LocationsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="navbar" text-center>
    <button ion-button menuToggle>
      <ion-icon name="menu"></ion-icon>
    </button>
    <ion-title>Locations</ion-title>
  </ion-navbar>

  <ion-row style="background-color: #2F3C51 !important; color: #FFCB08 !important">
    <ion-col col-10 text-center>
      Last Synced: {{ tillDate == null || tillDate == '' ? 'Not Available' : momentjs(tillDate).format('DD MMM YY hh:mm
      a')}}
    </ion-col>
    <ion-col col-2 text-center>
      <ion-icon ios="ios-refresh" (click)="syncLocationData()" md="md-refresh" *ngIf="!isDataSynching"></ion-icon>
      <ion-spinner name="crescent" *ngIf="isDataSynching" color="plain"></ion-spinner>
    </ion-col>
  </ion-row>

</ion-header>


<ion-content no-padding>

  <!-- Add New Client Location-->
  <ion-card class="pj-full-width-without-border" (click)="addNewLocation()">
    <ion-card-header>
      <ion-row>
        <ion-col col-10 text-center>
          <strong>Add New Location</strong><br />
        </ion-col>
        <ion-col col-2 text-center>
          <ion-icon ios="ios-add-circle" md="md-add-circle" color="primary"></ion-icon>
        </ion-col>
      </ion-row>
    </ion-card-header>
  </ion-card>

  <div *ngIf="locationsList.length==0" class="pj-empty-page" style="margin-top: 40%;">
    <ion-icon name="ios-contact-outline"></ion-icon>
    <h4>No Locations To Show</h4>
  </div>

  <!-- Visit History -->
  <div class="locations" *ngFor="let location of locationsList">
    <ion-row>
      <ion-col col-10 (click)="viewLocationDetails(location)">
        <p style="color: #FFCB08 !important"><strong>{{ location.geofenceName }}</strong></p>
      </ion-col>
      <ion-col col-2 text-center (click)="updateLocation(location)">
        <ion-icon ios="ios-create" md="md-create" color="primary"></ion-icon>
      </ion-col>
    </ion-row>
    <ion-row>
      <ion-col col-12 style="color:#ffffff">
        {{ location.geofenceAddr}}
      </ion-col>
    </ion-row>
  </div>

</ion-content>